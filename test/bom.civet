assert from assert
{ decode } from ../source/main.civet

describe "BOM", ->
  it "handles no BOM", =>
    assert.equal "tést",
      decode Buffer.from [0x74, 0xc3, 0xa9, 0x73, 0x74]

  it "handles UTF-8 BOM", =>
    assert.equal "tést",
      decode Buffer.from [0xEF, 0xBB, 0xBF, 0x74, 0xc3, 0xa9, 0x73, 0x74]

  it "handles UTF-16LE BOM", =>
    assert.equal "tést",
      decode Buffer.from [0xFF, 0xFE, 0x74, 0x00, 0xe9, 0x00, 0x73, 0x00, 0x74, 0x00]

  it "handles UTF-16BE BOM", =>
    assert.equal "tést",
      decode Buffer.from [0xFE, 0xFF, 0x00, 0x74, 0x00, 0xe9, 0x00, 0x73, 0x00, 0x74]
