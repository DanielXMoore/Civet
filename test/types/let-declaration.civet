{testCase, throws} from ../helper.civet

describe "[TS] let declaration", ->
  testCase """
    trailing JSX is not treated as type arguments
    ---
    let svg: SVGSVGElement
    <header>
    <svg ref={svg!}>
    ---
    let svg: SVGSVGElement
    <>
    <header />
    <svg ref={svg!} />
    </>
  """

  testCase """
    non-null assertion
    ---
    let ref!: HTMLDivElement
    let untyped!
    ---
    let ref!: HTMLDivElement
    let untyped!
  """

  throws """
    forbid ?!
    ---
    let ref?!
    ---
    let ref?!
  """

  testCase """
    let ?: allows for undefined
    ---
    let n?: number
    ---
    let n: undefined | (number)
  """

  testCase """
    shorthand let ?: allows for undefined
    ---
    n?: number .= undefined
    ---
    let n: undefined | (number) = undefined
  """

  testCase """
    let ?: with spaces
    ---
    let n ? : number
    ---
    let n  : undefined | (number)
  """

