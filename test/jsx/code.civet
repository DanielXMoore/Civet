{ testCase } from ../helper.civet

describe "jsxCode", ->
  testCase """
    nested
    ---
    "civet jsxCodeNested"
    Component := (items: Item[]) =>
      <ul>
        for item of items
          <li>
            if item.type === "link"
              <a href=item.url>some link title: {item.title}
            else
              <p>{item.content}
    ---
    const Component = (items: Item[]) => {
      return <ul>
        {(()=>{const results=[];for (const item of items) {
          results.push(<li>
            {(item.type === "link"?
              <a href={item.url}>some link title: {item.title}
              </a>
            :
              <p>{item.content}
              </p>)}
          </li>)
        }return results})()}
      </ul>
    }
  """

  testCase """
    same line
    ---
    "civet jsxCodeSameLine"
    <div>
      Logged in as:
      <span .name> name
    </div>
    ---
    <div>
      Logged in as:
      <span class="name">{name}
      </span>
    </div>
  """

  testCase """
    both
    ---
    "civet jsxCode"
    <div>
      if items
        <h1> "List of items:"
        <ul> for item in items
          <li> <span> item
      else
        <span> "No items found"
    ---
    <div>
      {(items?
        <>
        <h1>{"List of items:"}
        </h1>
        <ul>{(()=>{const results=[];for (const item in items) {
          results.push(<li><span>{item}
          </span>
          </li>)
        }return results})()}
        </ul>
        </>
      :
        <span>{"No items found"}
        </span>)}
    </div>
  """
